pipeline {
    agent any
    
    stages {
        stage('Build') {
            steps {
                echo 'Building...'
                catchError(buildResult: 'SUCCESS', stageResult: 'SUCCESS') {
                    // Add a 20-second wait in the build stage
                    sleep time: 20, unit: 'SECONDS'
                    
                    // Your build steps here
                    sh 'mvn clean install'
                }
            }
        }
        
        stage('Test') {
            steps {
                echo 'Running test...'
                catchError(buildResult: 'SUCCESS', stageResult: 'SUCCESS') {
                    // Add a 30-second wait in the testing stage
                    sleep time: 30, unit: 'SECONDS'
                    
                    // Your test steps here
                    // Example test case that always passes
                    sh '''
                    cat > Test.java <<EOF
                    import org.junit.Test;
                    import static org.junit.Assert.assertTrue;

                    public class Test {
                        @Test
                        public void testAlwaysPasses() {
                            assertTrue(true);
                        }
                    }
                    EOF
                    javac -cp junit.jar Test.java
                    java -cp .:junit.jar:hamcrest.jar org.junit.runner.JUnitCore Test
                    '''
                }
            }
        }
    }
}
